apiVersion: kubeadm.k8s.io/v1beta3
kind: JoinConfiguration
discovery:
  bootstrapToken:
    token: {{.BootstrapToken}}
    apiServerEndpoint: {{.APIServerEndpoint}}
    caCertHashes:
    {{- range .CACertHashes}}
    - {{.}}
    {{- end}}
nodeRegistration:
  criSocket: unix:///var/run/containerd/containerd.sock
  kubeletExtraArgs:
    pod-infra-container-image: {{.PauseImage}}
{{- if .IsControlPlane}}
controlPlane:
  localAPIEndpoint:
    advertiseAddress: {{.AdvertiseAddress}}
    bindPort: {{.BindPort}}
  certificateKey: {{.CertificateKey}}
{{- end}}