# ==============================================================================
# This chrony configuration file is generated by Kubexm.
  # DO NOT EDIT THIS FILE MANUALLY.
  #
  # This node is configured as an NTP client.
  # ==============================================================================

  # ------------------------------------------------------------------------------
  # NTP Servers Configuration
  # ------------------------------------------------------------------------------
  # Use the NTP servers specified in the Cluster configuration.
  # The 'iburst' option sends a burst of packets on startup for faster initial sync.
  {{- if .NTPServers }}
  {{- range .NTPServers }}
  server {{ . }} iburst
  {{- end }}
  {{- else }}
  # Fallback to a public pool if no servers are specified (for internet-connected environments).
  # CONSIDER REMOVING THIS BLOCK IF YOUR ENVIRONMENT IS FULLY OFFLINE.
  pool 2.pool.ntp.org iburst
  {{- end }}

  # ------------------------------------------------------------------------------
  # Clock Control and Adjustment
  # ------------------------------------------------------------------------------
  # This directive enables the kernel's automatic time correction mechanism.
  driftfile /var/lib/chrony/drift
  
  # Step the system clock immediately on startup if the offset is larger than 1
  # second, but only do this for the first three clock updates. After that, slew
  # the clock to avoid large time jumps that can affect applications.
  makestep 1.0 3
  
  # Enable kernel synchronization of the real-time clock (RTC).
  rtcsync
  
  # ------------------------------------------------------------------------------
  # Security and Access Control
  # ------------------------------------------------------------------------------
  # By default, deny all NTP client access from the network. This machine is a client, not a server.
  port 0
  # The following commands are often default but explicitly stated here for clarity.
  # They restrict access to the chronyd daemon to the local machine only.
  bindcmdaddress 127.0.0.1
  bindcmdaddress ::1
  
  # ------------------------------------------------------------------------------
  # Logging
  # ------------------------------------------------------------------------------
  # Specify the directory for log files.
  logdir /var/log/chrony

  # Log measurements, statistics, and tracking data.
# log measurements statistics tracking